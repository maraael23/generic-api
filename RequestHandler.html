<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (24) on Tue Jul 01 18:25:42 CEST 2025 -->
<title>RequestHandler</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2025-07-01">
<meta name="description" content="declaration: class: RequestHandler">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="resource-files/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="resource-files/stylesheet.css" title="Style">
<script type="text/javascript" src="script-files/script.js"></script>
<script type="text/javascript" src="script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "./";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="search.html">Search</a></li>
<li><a href="help-doc.html#class">Help</a></li>
</ul>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">Unnamed Package</a></li>
<li><a href="RequestHandler.html" class="current-selection">RequestHandler</a></li>
</ol>
<div class="nav-list-search">
<input type="text" id="search-input" disabled placeholder="Search" aria-label="Search in documentation" autocomplete="off">
<input type="reset" id="reset-search" disabled value="Reset">
</div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;
<input type="text" class="filter-input" disabled placeholder="Filter" aria-label="Filter table of contents" autocomplete="off">
<input type="reset" class="reset-filter" disabled value="Reset">
</div>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span>&#10094;</button><button class="show-sidebar">&#10095;<span>&nbsp;Show sidebar</span></button>
<ol class="toc-list">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#field-summary" tabindex="0">Field Summary</a></li>
<li><a href="#constructor-summary" tabindex="0">Constructor Summary</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#field-detail" tabindex="0">Field Details</a>
<ol class="toc-list">
<li><a href="#queue" tabindex="0">queue</a></li>
<li><a href="#idCounter" tabindex="0">idCounter</a></li>
</ol>
</li>
<li><a href="#constructor-detail" tabindex="0">Constructor Details</a>
<ol class="toc-list">
<li><a href="#%3Cinit%3E()" tabindex="0">RequestHandler()</a></li>
</ol>
</li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#startProducer(java.lang.Runnable)" tabindex="0">startProducer(Runnable)</a></li>
<li><a href="#getQueue()" tabindex="0">getQueue()</a></li>
<li><a href="#remove(Request)" tabindex="0">remove(Request)</a></li>
<li><a href="#clear()" tabindex="0">clear()</a></li>
<li><a href="#getNextRequest(int,Direction)" tabindex="0">getNextRequest(int, Direction)</a></li>
</ol>
</li>
</ol>
</nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class RequestHandler" class="title">Class RequestHandler</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">RequestHandler</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">RequestHandler</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Handles incoming client requests for the elevator system.
 This class manages a **queue** of requests, adds new requests from a **producer thread**,
 and provides methods to retrieve and manage requests based on various priorities.
 It ensures **thread safety** for the request queue using <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/util/concurrent/CopyOnWriteArrayList.html" title="class or interface in java.util.concurrent" class="external-link"><code>CopyOnWriteArrayList</code></a>.</div>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private int</code></div>
<div class="col-second even-row-color"><code><a href="#idCounter" class="member-name-link">idCounter</a></code></div>
<div class="col-last even-row-color">
<div class="block">A **simple counter** used to assign a **unique identifier** to each incoming request.</div>
</div>
<div class="col-first odd-row-color"><code>private final <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a><wbr>&lt;<a href="Request.html" title="class in Unnamed Package">Request</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#queue" class="member-name-link">queue</a></code></div>
<div class="col-last odd-row-color">
<div class="block">A **thread-safe list** to store incoming elevator requests.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">RequestHandler</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#clear()" class="member-name-link">clear</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Clears **all pending requests** from the queue.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="Request.html" title="class in Unnamed Package">Request</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNextRequest(int,Direction)" class="member-name-link">getNextRequest</a><wbr>(int&nbsp;currentFloor,
 <a href="Direction.html" title="enum class in Unnamed Package">Direction</a>&nbsp;direction)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determines and returns the **next most prioritized request** for the elevator to service.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a><wbr>&lt;<a href="Request.html" title="class in Unnamed Package">Request</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getQueue()" class="member-name-link">getQueue</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Provides **read access** to the internal list of pending elevator requests.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#remove(Request)" class="member-name-link">remove</a><wbr>(<a href="Request.html" title="class in Unnamed Package">Request</a>&nbsp;r)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Removes a **specific <a href="Request.html" title="class in Unnamed Package"><code>Request</code></a> object** from the queue.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startProducer(java.lang.Runnable)" class="member-name-link">startProducer</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link">Runnable</a>&nbsp;onEmergency)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Initiates a **producer thread** responsible for listening for new client connections
 and processing incoming elevator requests.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="queue">
<h3>queue</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Request.html" title="class in Unnamed Package">Request</a>&gt;</span>&nbsp;<span class="element-name">queue</span></div>
<div class="block">A **thread-safe list** to store incoming elevator requests.
 <code>CopyOnWriteArrayList</code> is chosen here because it allows **concurrent reads without locking**,
 making it efficient for scenarios where reads vastly outnumber writes.
 It ensures **thread safety for modifications (writes)** by creating a fresh copy of the underlying array
 with each write operation, thus avoiding concurrency issues.</div>
</div>
</section>
</li>
<li>
<section class="detail" id="idCounter">
<h3>idCounter</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">idCounter</span></div>
<div class="block">A **simple counter** used to assign a **unique identifier** to each incoming request.
 Every time a new request is successfully received and parsed, this counter is **incremented**,
 and its new value is assigned as the ID for that request. This ensures that each request
 has a distinct identifier within the system.</div>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>RequestHandler</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">RequestHandler</span>()</div>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="startProducer(java.lang.Runnable)">
<h3>startProducer</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">startProducer</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link">Runnable</a>&nbsp;onEmergency)</span></div>
<div class="block">Initiates a **producer thread** responsible for listening for new client connections
 and processing incoming elevator requests.
 This method starts a separate thread that continuously binds to **port 5555** using a <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/net/ServerSocket.html" title="class or interface in java.net" class="external-link"><code>ServerSocket</code></a>.

 <p>When a client connects:</p>
 <ul>
 <li>It accepts the connection using <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/net/ServerSocket.html#accept()" title="class or interface in java.net" class="external-link"><code>ServerSocket.accept()</code></a>.</li>
 <li>It then sets up a <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/io/BufferedReader.html" title="class or interface in java.io" class="external-link"><code>BufferedReader</code></a> to **read the incoming data stream** from the client.</li>
 <li>The producer expects a single line of input, which represents an elevator request (e.g., "3u", "5i", "0a").</li>
 <li>This raw input is **trimmed of whitespace** and **converted to lowercase** for consistent processing.</li>
 <li>A **regular expression `"[0-6][iuda]"`** is used to validate the input format. This pattern
 ensures that the input starts with a digit from 0 to 6 (representing a floor)
 followed by one of 'i' (inside call), 'u' (outside up call), 'd' (outside down call), or 'a' (admin call).</li>
 <li>If the input is **invalid**, an error message is printed, and the input is ignored, continuing to listen for the next client.</li>
 <li>For **valid inputs**, a new <a href="Request.html" title="class in Unnamed Package"><code>Request</code></a> object is created with an incremented unique ID (`++idCounter`)
 and the parsed raw input.</li>
 <li>This newly created request is then **added to the `queue`** using `queue.add(r)`.</li>
 <li>A special check is performed: if the created request is an **emergency stop** (`r.isEmergencyStop()`),
 the provided `onEmergency` <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link"><code>Runnable</code></a> callback is immediately executed. This allows external
 components (like an elevator controller) to react instantaneously to such critical requests.</li>
 <li>Finally, the current state of the `queue` is printed to the console for logging and debugging purposes.</li>
 </ul>
 <p>Both `ServerSocket` and `Socket` resources are managed using **try-with-resources** to ensure
 they are automatically closed, even if exceptions occur.</p>
 <p>The producer thread is set as a **daemon thread** (`producer.setDaemon(true)`). This means
 the Java Virtual Machine (JVM) will not wait for this thread to finish its execution before exiting
 if all non-daemon threads have completed. It allows the application to terminate gracefully
 without needing to explicitly stop this listener thread.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>onEmergency</code> - A <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link"><code>Runnable</code></a> callback that is executed immediately when an
 emergency stop request is successfully received and added to the queue.
 This provides a mechanism for urgent, immediate action by the system.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getQueue()">
<h3>getQueue</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Request.html" title="class in Unnamed Package">Request</a>&gt;</span>&nbsp;<span class="element-name">getQueue</span>()</div>
<div class="block">Provides **read access** to the internal list of pending elevator requests.
 This method returns a **reference** to the `queue` (a <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/util/concurrent/CopyOnWriteArrayList.html" title="class or interface in java.util.concurrent" class="external-link"><code>CopyOnWriteArrayList</code></a>).
 While the list itself is thread-safe for modifications, callers should be aware that
 direct manipulation of the returned list *could* affect the internal state of the `RequestHandler`.
 However, <code>CopyOnWriteArrayList</code> makes writes (add, remove) create a new copy,
 so iterators (and thus reads) on existing lists are not affected by concurrent writes.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>A <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link"><code>List</code></a> of <a href="Request.html" title="class in Unnamed Package"><code>Request</code></a> objects that are currently in the queue,
 representing all pending elevator requests.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="remove(Request)">
<h3>remove</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">remove</span><wbr><span class="parameters">(<a href="Request.html" title="class in Unnamed Package">Request</a>&nbsp;r)</span></div>
<div class="block">Removes a **specific <a href="Request.html" title="class in Unnamed Package"><code>Request</code></a> object** from the queue.
 This method relies on the `equals()` method of the `Request` object
 to determine if an object in the queue matches the provided request.
 If the specified request is found in the queue, it is removed.
 This is typically called after an elevator has successfully serviced a request.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>r</code> - The <a href="Request.html" title="class in Unnamed Package"><code>Request</code></a> object to be removed from the queue.
 This object should match an existing request in the queue.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="clear()">
<h3>clear</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">clear</span>()</div>
<div class="block">Clears **all pending requests** from the queue.
 This effectively empties the elevator's request queue, which might be useful
 in scenarios such as system resets or when initializing the elevator state.
 After this method is called, `getQueue()` will return an empty list until
 new requests are added by the producer or other means.</div>
</div>
</section>
</li>
<li>
<section class="detail" id="getNextRequest(int,Direction)">
<h3>getNextRequest</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="Request.html" title="class in Unnamed Package">Request</a></span>&nbsp;<span class="element-name">getNextRequest</span><wbr><span class="parameters">(int&nbsp;currentFloor,
 <a href="Direction.html" title="enum class in Unnamed Package">Direction</a>&nbsp;direction)</span></div>
<div class="block">Determines and returns the **next most prioritized request** for the elevator to service.
 This method implements a **complex priority system** to decide which request
 should be handled next, taking into account special commands, elevator's current position,
 and its direction of travel.

 <p>The priority order is strictly defined as follows:</p>
 <ol>
 <li>**Priority 1: System Reset Requests**
 <ul>
 <li>Any <a href="Request.html" title="class in Unnamed Package"><code>Request</code></a> that is identified as a **system reset** (e.g., '0a' specifically for reset).</li>
 <li>These are the highest priority and are checked first. If found, the method immediately returns it.</li>
 </ul>
 </li>
 <li>**Priority 2: Emergency Stop Requests**
 <ul>
 <li>Any <a href="Request.html" title="class in Unnamed Package"><code>Request</code></a> that signals an **emergency stop** (e.g., '6a' for emergency stop).</li>
 <li>These are also very high priority. The comment notes that these are typically
 **removed by the `ElevatorController`** *after* processing, implying that `RequestHandler`
 identifies it, but the controller is responsible for its lifecycle.</li>
 </ul>
 </li>
 <li>**Priority 3: Emergency Reset Requests**
 <ul>
 <li>Any <a href="Request.html" title="class in Unnamed Package"><code>Request</code></a> that is an **emergency reset** (e.g., '5a' for emergency reset).</li>
 <li>These requests are designed to be picked up **only after an emergency stop** has been addressed
 (i.e., the emergency stop request itself has been removed from the queue). This ensures
 the system remains in an emergency stop state until explicitly reset.</li>
 </ul>
 </li>
 <li>**Priority 4: General Admin Requests**
 <ul>
 <li>Any <a href="Request.html" title="class in Unnamed Package"><code>Request</code></a> marked as an **admin call** (e.g., '1a', '2a') that is *not*
 already covered by the higher priorities (i.e., not an emergency stop, emergency reset, or system reset).</li>
 <li>This ensures that administrative commands that are not safety-critical take precedence over regular floor calls.</li>
 </ul>
 </li>
 <li>**Priority 5: Floor Requests in Current Direction (Req 9)**
 <ul>
 <li>This is the first complex decision point for regular elevator movement.</li>
 <li>It first filters out all special (admin, emergency, system reset) requests,
 leaving only genuine floor call requests (e.g., "3u", "4d", "2i").</li>
 <li>If the elevator's `direction` is **`Direction.UP`**:
 <ul>
 <li>It looks for requests that are **at or above the `currentFloor`**.</li>
 <li>Specifically, it considers requests from outside to go up (`'u'`) or internal calls (`'i'`).</li>
 <li>Among these, it selects the request with the **minimum floor** (the closest floor upwards).</li>
 </ul>
 </li>
 <li>If the elevator's `direction` is **`Direction.DOWN`**:
 <ul>
 <li>It looks for requests that are **at or below the `currentFloor`**.</li>
 <li>Specifically, it considers requests from outside to go down (`'d'`) or internal calls (`'i'`).</li>
 <li>Among these, it selects the request with the **maximum floor** (the closest floor downwards).</li>
 </ul>
 </li>
 <li>If a suitable request is found in the current direction, it is returned.</li>
 </ul>
 </li>
 <li>**Priority 6: Any Closest Floor Request (Req 8 and Req 10)**
 <ul>
 <li>This step is executed if **no specific directional request** (Priority 5) was found, or
 if the elevator is currently in an **`IDLE` state**.</li>
 <li>It considers all remaining floor requests (those filtered in Priority 5).</li>
 <li>It then finds the request that is **closest to the `currentFloor`** regardless of direction.
 This handles two scenarios:
 <ul>
 <li>**Req 8 (Idle moves to first request):** If the elevator is idle, it will move to the closest pending request.</li>
 <li>**Req 10 (Change direction):** If the elevator has serviced all requests in its current direction, it will
 then pick the closest request in the opposite direction to continue servicing.</li>
 </ul>
 </li>
 <li>The absolute difference `Math.abs(r.floor - currentFloor)` is used to determine closeness.</li>
 </ul>
 </li>
 </ol>

 <p>If, after checking all priorities, no suitable request is found in the queue, the method returns `null`.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>currentFloor</code> - The integer representing the elevator's current floor. This is crucial
 for determining the closeness and directional relevance of requests.</dd>
<dd><code>direction</code> - The <a href="Direction.html" title="enum class in Unnamed Package"><code>Direction</code></a> enum representing the elevator's current movement
 state (UP, DOWN, or IDLE). This dictates the directional priority of requests.</dd>
<dt>Returns:</dt>
<dd>The next <a href="Request.html" title="class in Unnamed Package"><code>Request</code></a> object that the elevator should service based on the defined
 priority rules, or `null` if the queue is empty or contains no processable requests
 under the current conditions.</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</body>
</html>
